!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("lodash/merge"),require("prism-es6"),require("prism-es6/themes/prism-tomorrow.css")):"function"==typeof define&&define.amd?define(["exports","lodash/merge","prism-es6","prism-es6/themes/prism-tomorrow.css"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["fl-vue"]={},t.merge,t.Prism)}(this,(function(t,e,s){"use strict";function i(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var o=i(e),r=i(s);const l=require("axios"),n=require("axios-retry"),a=l.create();n(a,{retries:2,retryDelay:(t=0)=>1e3*Math.pow(2,t)+1e3*Math.random(),retryCondition:n.isRetryableError});var f=a,c={name:"FlLink",props:{title:{type:String},to:{type:String,required:!0},blank:{type:Boolean,default:!1}},render:function(t){return this.blank?this.createRemoteLink(t):this.$router?this.createRouterLink(t):this.createLink(t)},computed:{linkContent(){return this.$slots.default?this.$slots.default:this.title?this.title:""}},methods:{createLink(t){return t("a",{attrs:{href:this.to},class:{"fl-link":!0}},this.linkContent)},createRouterLink(t){return t("router-link",{attrs:{to:this.to},class:{"fl-link":!0,"fl-link-router":!0,[this.class]:!!this.class}},this.linkContent)},createRemoteLink(t){return t("a",{attrs:{href:this.to,target:"_blank"},class:{"fl-link":!0,"fl-link-remote":!0,[this.class]:!0}},this.linkContent)}}},h={name:"FlDropdown",data:function(){return{show:!1}},props:{container:{type:String,default:"div"},type:{type:String,default:"link"},title:{type:String,required:!0},items:{type:Array,required:!0},className:String,handlerClassName:String},components:{FlLink:c},render:function(t){const e=[];return"button"===this.type?e.push(this.createButton(t)):e.push(this.createLink(t)),e.push(this.createDropdown(t)),t(this.container,{class:{"fl-dropdown":!0,dropdown:!0,[this.className]:!!this.className}},e)},methods:{createLink(t){let e=this;return t("a",{attrs:{href:"#"},class:{[this.handlerClassName]:!!this.handlerClassName,show:this.show},on:{click:function(t){t.preventDefault(),e.show=!e.show}}},[this.title])},createButton(t){},createDropdown(t){const e=[];if(this.items)for(const s of this.items){const i=this.createDropdownLink(t,s);i&&e.push(i)}return t("ul",{class:{"dropdown-menu":!0,show:this.show}},e)},createDropdownLink(t,e){let s=this,i=t("fl-link",{class:{"dropdown-item":!0},props:{to:e.to,title:e.title},nativeOn:{click:function(t){s.show=!s.show}}});return t("li",[i])}}},p={name:"FlNavbar",props:{menu:{}},components:{FlLink:c,FlDropdown:h},render:function(t){return this.ce(t,"nav",this.getClasses,[this.createContainer(t)])},computed:{getClasses(){const t={"fl-footer":!0,"fl-navbar":!0,navbar:!0,"navbar-expand-lg":!0};if(this.$fj.options.navbar.class){const e=this.$fj.options.navbar.class.split(" ");for(const s of e)t[s]=!0}return t}},methods:{ce:(t,e,s,i)=>t(e,{class:s},i),createContainer(t){const e=[];if(this.menu){let s=[];Array.isArray(this.menu)?s=this.menu:s.push(this.menu);for(const i of s){let s;s=Array.isArray(i)?this.createNavbarNav(t,{items:i}):this.createNavbarNav(t,i),s&&e.push(s)}}return this.ce(t,"div","container",[this.$slots.default,...e])},createNavbarNav(t,e){if(!1===e.visible)return;const s=[];if(e.items)for(const i of e.items)if(i.dropdown){if(!Array.isArray(i.dropdown))throw new Error("Dropdown list is not an array.");const e=this.createNavDropdown(t,i);e&&s.push(e)}else{const e=this.createNavItem(t,i);e&&s.push(e)}return t("ul",{class:{"navbar-nav":!0,[e.className]:!!e.className}},s)},createNavItem(t,e){if(!1!==e.visible)return this.ce(t,"li","nav-item",[this.createNavLink(t,e)])},createNavLink:(t,e)=>t("fl-link",{class:"nav-link",props:{to:e.to}},[e.title]),createNavDropdown(t,e){if(!1!==e.visible)return t("fl-dropdown",{props:{items:e.dropdown,title:e.title,className:"nav-item",handlerClassName:"nav-link dropdown-toggle",container:"li"}})}}};function d(t,e,s,i,o,r,l,n,a,f){"boolean"!=typeof l&&(a=n,n=l,l=!1);const c="function"==typeof s?s.options:s;let h;if(t&&t.render&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns,c._compiled=!0,o&&(c.functional=!0)),i&&(c._scopeId=i),r?(h=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,a(t)),t&&t._registeredComponents&&t._registeredComponents.add(r)},c._ssrRegister=h):e&&(h=l?function(t){e.call(this,f(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,n(t))}),h)if(c.functional){const t=c.render;c.render=function(e,s){return h.call(s),t(e,s)}}else{const t=c.beforeCreate;c.beforeCreate=t?[].concat(t,h):[h]}return s}const u=d({render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._t("default")],2)},staticRenderFns:[]},void 0,{props:{relativeElementSelector:{type:String,required:!0},offset:{type:Object,default:()=>({top:40,bottom:40}),validator(t){if("object"!=typeof t)return!1;const e=Object.keys(t);return e.includes("top")&&e.includes("bottom")}},enabled:{type:Boolean,default:!0},scrollAffix:{type:Boolean,default:!1},scrollContainerSelector:{type:String,default:null}},computed:{relativeElement(){return document.querySelector(this.relativeElementSelector)},scrollContainer(){return this.scrollContainerSelector?document.querySelector(this.scrollContainerSelector):window},affixTopPos(){return this.affixRect.top+this.topOfScreen-this.offset.top-this.topPadding},affixBottomPos(){return this.affixRect.bottom+this.topOfScreen+this.offset.bottom},bottomOfScreen(){return this.topOfScreen+this.scrollContainer.innerHeight},relativeElmTopPos(){return this.topOfScreen+this.relativeElement.getBoundingClientRect().top},relativeElmBottomPos(){return this.topOfScreen+this.relativeElement.getBoundingClientRect().bottom},screenIsPastAffix(){return this.bottomOfScreen>=this.affixBottomPos},screenIsBeforeAffix(){return this.topOfScreen<=this.affixTopPos},screenIsBeforeRelativeElm(){return this.topOfScreen<=this.relativeElmTopPos-this.offset.top},screenIsPastRelativeElm(){return this.bottomOfScreen>=this.relativeElmBottomPos+this.offset.bottom},screenIsInsideRelativeElm(){return!this.screenIsBeforeRelativeElm&&!this.screenIsPastRelativeElm}},data:()=>({frameId:null,affixHeight:null,affixRect:null,affixInitialTop:null,relativeElmOffsetTop:null,topPadding:null,lastState:null,currentState:null,currentScrollAffix:null,topOfScreen:null,lastDistanceFromTop:null,scrollingUp:null,scrollingDown:null}),watch:{offset(t,e){t.top===e.top&&t.bottom===e.bottom||this.onScroll()}},methods:{updateData(){this.topOfScreen=this.scrollContainer.scrollTop||window.pageYOffset,this.affixRect=this.$el.getBoundingClientRect(),this.affixHeight=this.$el.offsetHeight,this.relativeElmOffsetTop=this.getOffsetTop(this.relativeElement)},handleScroll(){this.frameId||(this.frameId=window.requestAnimationFrame(()=>{this.onScroll(),this.frameId=null}))},onScroll(){if(!this.enabled)return void this.removeClasses();this.updateData();if(this.affixHeight+this.offset.top>=this.relativeElement.offsetHeight)return void(this.scrollAffix&&"scrollaffix-top"!==this.currentScrollAffix?this.setScrollAffixTop():"affix-top"!==this.currentState&&this.setAffixTop());const t=this.affixHeight+this.offset.bottom+this.offset.top;this.scrollAffix&&t>this.scrollContainer.innerHeight?this.handleScrollAffix():this.handleAffix()},handleAffix(){this.topOfScreen<this.relativeElmOffsetTop-this.offset.top&&this.setAffixTop(),this.topOfScreen>=this.relativeElmOffsetTop-this.offset.top&&this.relativeElmBottomPos-this.offset.bottom>=this.topOfScreen+this.topPadding+this.affixHeight+this.offset.top&&this.setAffix(),this.relativeElmBottomPos-this.offset.bottom<this.topOfScreen+this.topPadding+this.affixHeight+this.offset.top&&this.setAffixBottom(),this.lastState=this.currentState},handleScrollAffix(){if(this.setScrollingDirection(),this.screenIsBeforeRelativeElm)this.setScrollAffixTop();else if(this.screenIsPastRelativeElm)this.setScrollAffixBottom();else if(this.screenIsInsideRelativeElm){const t="scrollaffix-top"===this.currentScrollAffix||"scrollaffix-bottom"===this.currentScrollAffix||"scrollaffix-up"===this.currentScrollAffix&&this.scrollingDown||"scrollaffix-down"===this.currentScrollAffix&&this.scrollingUp;this.screenIsBeforeAffix&&this.scrollingUp?this.setScrollAffixUp():this.screenIsPastAffix&&this.scrollingDown?this.setScrollAffixDown():t&&this.setScrollAffixScrolling()}this.lastScrollAffixState=this.currentScrollAffix,this.lastDistanceFromTop=this.topOfScreen},initScrollAffix(){this.bottomOfScreen<this.affixBottomPos?this.setScrollAffixTop():this.screenIsInsideRelativeElm?this.setScrollAffixDown():this.screenIsPastRelativeElm?this.setScrollAffixBottom():this.setScrollAffixScrolling()},setScrollAffixScrolling(){this.currentScrollAffix="scrollaffix-scrolling",this.$el.style.top="".concat(Math.floor(this.affixRect.top)+this.topOfScreen-this.affixInitialTop,"px"),this.$el.style.bottom="auto",this.removeClasses(),this.emitEvent()},setScrollAffixUp(){this.currentScrollAffix="scrollaffix-up",this.currentScrollAffix!==this.lastScrollAffixState&&(this.$el.style.top="".concat(this.topPadding+this.offset.top,"px"),this.$el.style.bottom="auto",this.removeClasses(),this.emitEvent(),this.$el.classList.add("affix"))},setScrollAffixDown(){this.currentScrollAffix="scrollaffix-down",this.currentScrollAffix!==this.lastScrollAffixState&&(this.$el.style.bottom="".concat(this.offset.bottom,"px"),this.$el.style.top="auto",this.removeClasses(),this.emitEvent(),this.$el.classList.add("affix"))},setScrollAffixTop(){this.currentScrollAffix="scrollaffix-top",this.$el.style.top=0,this.$el.style.bottom="auto",this.removeClasses(),this.emitEvent()},setScrollAffixBottom(){this.currentScrollAffix="scrollaffix-bottom",this.$el.style.top="".concat(this.relativeElmBottomPos-this.affixInitialTop-this.affixHeight,"px"),this.$el.style.bottom="auto",this.removeClasses(),this.emitEvent()},setScrollingDirection(){this.topOfScreen>this.lastDistanceFromTop?(this.scrollingDown=!0,this.scrollingUp=!1):(this.scrollingUp=!0,this.scrollingDown=!1)},setAffixTop(){this.currentState="affix-top",this.currentState!==this.lastState&&(this.emitEvent(),this.removeClasses(),this.$el.classList.remove("affix"),this.$el.classList.add("affix-top"),this.$el.style.top=null)},setAffix(){this.currentState="affix",this.$el.style.top="".concat(this.topPadding+this.offset.top,"px"),this.currentState!==this.lastState&&(this.emitEvent(),this.removeClasses(),this.$el.classList.add("affix"))},setAffixBottom(){this.currentState="affix-bottom",this.$el.style.top="".concat(this.relativeElement.offsetHeight-this.affixHeight-this.offset.bottom-this.topPadding,"px"),this.currentState!==this.lastState&&(this.emitEvent(),this.removeClasses(),this.$el.classList.add("affix-bottom"))},removeClasses(){this.$el.classList.remove("affix-top"),this.$el.classList.remove("affix"),this.$el.classList.remove("affix-bottom")},emitEvent(){this.scrollAffix&&this.lastScrollAffixState&&this.currentScrollAffix!==this.lastScrollAffixState&&this.$emit(this.currentScrollAffix.replace("-","")),this.lastState&&this.$emit(this.currentState.replace("-",""))},getOffsetTop(t){let e=0,s=t;for(;s;)e+=s.offsetTop,s=s.offsetParent;return e}},mounted(){if(this.$el.classList.add("fl-affix"),this.affixInitialTop=this.getOffsetTop(this.$el),this.topPadding=this.affixInitialTop-this.getOffsetTop(this.relativeElement),this.updateData(),this.scrollAffix){const t=this.affixHeight+this.offset.bottom+this.offset.top;this.scrollAffix&&t>this.scrollContainer.innerHeight&&this.initScrollAffix()}this.onScroll(),this.scrollContainer.addEventListener("scroll",this.handleScroll)},beforeDestroy(){this.scrollContainer.removeEventListener("scroll",this.handleScroll)}},void 0,!1,void 0,!1,void 0,void 0,void 0);var m={name:"FlContent",components:{FlAffix:u},render:function(t){let e=t("div",{class:"row h-100"},[this.createSidebar(t),this.createContent(t)]),s=t("div",{class:"container flex-fill"},[e]);return t("div",{class:"fl-content-wrapper d-flex flex-column"},[this.createHeader(t),s])},computed:{hasSidebar(){return!(!this.$route.matched[0]||!this.$route.matched[0].components.sidebar)},hasHeader(){return!(!this.$route.matched[0]||!this.$route.matched[0].components.header)},getHeaderClasses(){const t={"fl-header":!0};if(this.$route.meta&&this.$route.meta.header&&this.$route.meta.header.class){const e=this.$route.meta.header.class.split(" ");for(const s of e)t[s]=!0}if(this.$fj.options.header.class){const e=this.$fj.options.header.class.split(" ");for(const s of e)t[s]=!0}return t},getSidebarClasses(){const t={"fl-sidebar":!0,"col-md-3":!0};if(this.$route.meta&&this.$route.meta.sidebar&&this.$route.meta.sidebar.class){const e=this.$route.meta.sidebar.class.split(" ");for(const s of e)t[s]=!0}if(this.$fj.options.sidebar.class){const e=this.$fj.options.sidebar.class.split(" ");for(const s of e)t[s]=!0}return t},getContentClasses(){const t={"fl-content":!0,col:!0,"h-100":!0};if(this.$route.meta&&this.$route.meta.content&&this.$route.meta.content.class){const e=this.$route.meta.content.class.split(" ");for(const s of e)t[s]=!0}if(this.$fj.options.content.class){const e=this.$fj.options.content.class.split(" ");for(const s of e)t[s]=!0}return t}},methods:{createHeader(t){if(this.hasHeader)return t("div",{class:this.getHeaderClasses},[t("router-view",{props:{name:"header"}})])},createSidebar(t){if(this.hasSidebar)return t("div",{class:this.getSidebarClasses},[t("fl-affix",{props:{relativeElementSelector:".fl-content",offset:{top:0,bottom:0}},attrs:{style:"width: 300px;"}},[t("router-view",{props:{name:"sidebar"}})])])},createContent(t){return t("div",{class:this.getContentClasses},[t("router-view")])}}},x={name:"FlFooter",render:function(t){return t("div",{class:this.getClasses},this.$slots.default)},computed:{getClasses(){const t={"fl-footer":!0};if(this.$fj.options.footer.class){const e=this.$fj.options.footer.class.split(" ");for(const s of e)t[s]=!0}return t}}},v={name:"FlAlert",props:{type:{type:String,default:"info"}},render:function(t){return t("div",{class:{alert:!0,["alert-".concat(this.type)]:!0}},this.$slots.default)}},S={name:"FlCode",functional:!0,props:{code:{type:String},language:{type:String,default:"markup"}},render:function(t,e){const s=e.props.code||(e.children&&e.children.length>0?e.children[0].text:""),i=e.props.language,o=r.default.languages[i];return t("pre",{class:{"fl-content":!0,"language-javascript":!0}},[t("code",{class:"language-".concat(i),domProps:{innerHTML:r.default.highlight(s,o)}})])}},g={install(t,e){const s=o.default({options:{navbar:{},header:{class:null},sidebar:{class:null,follow:!0},content:{class:null},footer:{class:null}},language:{apiError:"Got an error while loading data from the API :(",apiFailed:"We've failed in any attempt made to process this list... We suck :(",listViewing:"Viewing %limit of %total items",pagination:{previous:"Previous",next:"Next"}}},e);t.prototype.$fj=s}};t.FlAffix=u,t.FlAlert=v,t.FlAxios=f,t.FlCode=S,t.FlContent=m,t.FlDropdown=h,t.FlFooter=x,t.FlLink=c,t.FlNavbar=p,t.default=g,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=fl-vue.min.umd.js.map
